     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_task_now
     7 00000000                                 	EXTERN	_sprintf
     8 00000000                                 	EXTERN	_print_string
     9 00000000                                 	EXTERN	_program_addr
    10 00000000                                 	EXTERN	_sheet_created
    11 00000000                                 	EXTERN	_print_error
    12 00000000                                 	EXTERN	_io_cli
    13 00000000                                 	EXTERN	_sheet_alloc
    14 00000000                                 	EXTERN	_mm_malloc
    15 00000000                                 	EXTERN	_sheet_setbuf
    16 00000000                                 	EXTERN	_make_window
    17 00000000                                 	EXTERN	_sheet_updown
    18 00000000                                 	EXTERN	_sheet_slide
    19 00000000                                 	EXTERN	_io_sti
    20 00000000                                 	EXTERN	_draw_string
    21 00000000                                 	EXTERN	_sheet_refresh
    22 00000000                                 	EXTERN	_draw_rect
    23 00000000                                 	EXTERN	_malloc_addr
    24 00000000                                 	EXTERN	_sheet_free
    25 00000000                                 	EXTERN	_mm_free
    26 00000000                                 	EXTERN	_fifo_status
    27 00000000                                 	EXTERN	_fifo_get
    28 00000000                                 	EXTERN	_key_to_char
    29 00000000                                 	EXTERN	_start_timing
    30 00000000                                 	EXTERN	_task_sleep
    31 00000000                                 [FILE "api.c"]
    32                                          [SECTION .text]
    33 00000000                                 	GLOBAL	_api_selection
    34 00000000                                 _api_selection:
    35 00000000 55                              	PUSH	EBP
    36 00000001 31 C0                           	XOR	EAX,EAX
    37 00000003 89 E5                           	MOV	EBP,ESP
    38 00000005 57                              	PUSH	EDI
    39 00000006 56                              	PUSH	ESI
    40 00000007 8B 55 24                        	MOV	EDX,DWORD [36+EBP]
    41 0000000A 53                              	PUSH	EBX
    42 0000000B 8B 75 18                        	MOV	ESI,DWORD [24+EBP]
    43 0000000E 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
    44 00000011 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
    45 00000014 8B 4D 20                        	MOV	ECX,DWORD [32+EBP]
    46 00000017 83 FA 0B                        	CMP	EDX,11
    47 0000001A 77 0C                           	JA	L1
    48 0000001C FF 24 95 [00000000]             	JMP	DWORD [L15+EDX*4]
    49                                          [SECTION .data]
    50 00000000                                 	ALIGNB	4
    51 00000000                                 L15:
    52 00000000 [00000023]                      	DD	L3
    53 00000004 [00000030]                      	DD	L4
    54 00000008 [00000038]                      	DD	L5
    55 0000000C [00000040]                      	DD	L6
    56 00000010 [00000052]                      	DD	L7
    57 00000014 [00000060]                      	DD	L8
    58 00000018 [00000071]                      	DD	L9
    59 0000001C [0000007C]                      	DD	L10
    60 00000020 [00000089]                      	DD	L11
    61 00000024 [0000009A]                      	DD	L12
    62 00000028 [000000A2]                      	DD	L13
    63 0000002C [000000AD]                      	DD	L14
    64                                          [SECTION .text]
    65 00000023                                 L3:
    66 00000023 E8 00000091                     	CALL	_api_terminate
    67 00000028                                 L1:
    68 00000028 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
    69 0000002B 5B                              	POP	EBX
    70 0000002C 5E                              	POP	ESI
    71 0000002D 5F                              	POP	EDI
    72 0000002E 5D                              	POP	EBP
    73 0000002F C3                              	RET
    74 00000030                                 L4:
    75 00000030 51                              	PUSH	ECX
    76 00000031 E8 00000092                     	CALL	_api_print_int
    77 00000036 EB F0                           	JMP	L1
    78 00000038                                 L5:
    79 00000038 51                              	PUSH	ECX
    80 00000039 E8 000000AF                     	CALL	_api_print_str
    81 0000003E EB E8                           	JMP	L1
    82 00000040                                 L6:
    83 00000040 57                              	PUSH	EDI
    84 00000041 8D 45 44                        	LEA	EAX,DWORD [68+EBP]
    85 00000044 53                              	PUSH	EBX
    86 00000045 FF 75 08                        	PUSH	DWORD [8+EBP]
    87 00000048 51                              	PUSH	ECX
    88 00000049 56                              	PUSH	ESI
    89 0000004A 50                              	PUSH	EAX
    90 0000004B E8 000000B2                     	CALL	_api_new_window
    91 00000050 EB D6                           	JMP	L1
    92 00000052                                 L7:
    93 00000052 53                              	PUSH	EBX
    94 00000053 FF 75 08                        	PUSH	DWORD [8+EBP]
    95 00000056 57                              	PUSH	EDI
    96 00000057 51                              	PUSH	ECX
    97 00000058 56                              	PUSH	ESI
    98 00000059 E8 00000142                     	CALL	_api_draw_str
    99 0000005E EB C8                           	JMP	L1
   100 00000060                                 L8:
   101 00000060 53                              	PUSH	EBX
   102 00000061 FF 75 08                        	PUSH	DWORD [8+EBP]
   103 00000064 57                              	PUSH	EDI
   104 00000065 51                              	PUSH	ECX
   105 00000066 FF 75 10                        	PUSH	DWORD [16+EBP]
   106 00000069 56                              	PUSH	ESI
   107 0000006A E8 000001C5                     	CALL	_api_draw_rec
   108 0000006F EB B7                           	JMP	L1
   109 00000071                                 L9:
   110 00000071 8D 45 44                        	LEA	EAX,DWORD [68+EBP]
   111 00000074 50                              	PUSH	EAX
   112 00000075 E8 00000229                     	CALL	_api_space
   113 0000007A EB AC                           	JMP	L1
   114 0000007C                                 L10:
   115 0000007C 53                              	PUSH	EBX
   116 0000007D FF 75 08                        	PUSH	DWORD [8+EBP]
   117 00000080 51                              	PUSH	ECX
   118 00000081 56                              	PUSH	ESI
   119 00000082 E8 0000022E                     	CALL	_api_draw_pt
   120 00000087 EB 9F                           	JMP	L1
   121 00000089                                 L11:
   122 00000089 53                              	PUSH	EBX
   123 0000008A FF 75 08                        	PUSH	DWORD [8+EBP]
   124 0000008D 57                              	PUSH	EDI
   125 0000008E 51                              	PUSH	ECX
   126 0000008F FF 75 10                        	PUSH	DWORD [16+EBP]
   127 00000092 56                              	PUSH	ESI
   128 00000093 E8 00000281                     	CALL	_api_draw_line
   129 00000098 EB 8E                           	JMP	L1
   130 0000009A                                 L12:
   131 0000009A 51                              	PUSH	ECX
   132 0000009B E8 000003C7                     	CALL	_api_print_err
   133 000000A0 EB 86                           	JMP	L1
   134 000000A2                                 L13:
   135 000000A2 56                              	PUSH	ESI
   136 000000A3 E8 000003D4                     	CALL	_api_close_window
   137 000000A8 E9 FFFFFF7B                     	JMP	L1
   138 000000AD                                 L14:
   139 000000AD 51                              	PUSH	ECX
   140 000000AE 56                              	PUSH	ESI
   141 000000AF E8 000003F7                     	CALL	_api_scan_str
   142 000000B4 E9 FFFFFF6F                     	JMP	L1
   143 000000B9                                 _api_terminate:
   144 000000B9 55                              	PUSH	EBP
   145 000000BA 89 E5                           	MOV	EBP,ESP
   146 000000BC E8 [00000000]                   	CALL	_task_now
   147 000000C1 5D                              	POP	EBP
   148 000000C2 05 00000428                     	ADD	EAX,1064
   149 000000C7 C3                              	RET
   150                                          [SECTION .data]
   151 00000030                                 LC0:
   152 00000030 25 64 00                        	DB	"%d",0x00
   153                                          [SECTION .text]
   154 000000C8                                 _api_print_int:
   155 000000C8 55                              	PUSH	EBP
   156 000000C9 89 E5                           	MOV	EBP,ESP
   157 000000CB 53                              	PUSH	EBX
   158 000000CC 83 EC 10                        	SUB	ESP,16
   159 000000CF FF 75 08                        	PUSH	DWORD [8+EBP]
   160 000000D2 68 [00000030]                   	PUSH	LC0
   161 000000D7 8D 5D EC                        	LEA	EBX,DWORD [-20+EBP]
   162 000000DA 53                              	PUSH	EBX
   163 000000DB E8 [00000000]                   	CALL	_sprintf
   164 000000E0 53                              	PUSH	EBX
   165 000000E1 E8 [00000000]                   	CALL	_print_string
   166 000000E6 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   167 000000E9 31 C0                           	XOR	EAX,EAX
   168 000000EB C9                              	LEAVE
   169 000000EC C3                              	RET
   170 000000ED                                 _api_print_str:
   171 000000ED 55                              	PUSH	EBP
   172 000000EE A1 [00000000]                   	MOV	EAX,DWORD [_program_addr]
   173 000000F3 89 E5                           	MOV	EBP,ESP
   174 000000F5 03 45 08                        	ADD	EAX,DWORD [8+EBP]
   175 000000F8 50                              	PUSH	EAX
   176 000000F9 E8 [00000000]                   	CALL	_print_string
   177 000000FE 31 C0                           	XOR	EAX,EAX
   178 00000100 C9                              	LEAVE
   179 00000101 C3                              	RET
   180                                          [SECTION .data]
   181 00000033                                 LC1:
   182 00000033 6E 65 77 5F 77 69 6E 64 6F 77   	DB	"new_window error: only one window could be created",0x00
       0000003D 20 65 72 72 6F 72 3A 20 6F 6E 
       00000047 6C 79 20 6F 6E 65 20 77 69 6E 
       00000051 64 6F 77 20 63 6F 75 6C 64 20 
       0000005B 62 65 20 63 72 65 61 74 65 64 
       00000065 00 
   183                                          [SECTION .text]
   184 00000102                                 _api_new_window:
   185 00000102 55                              	PUSH	EBP
   186 00000103 89 E5                           	MOV	EBP,ESP
   187 00000105 57                              	PUSH	EDI
   188 00000106 56                              	PUSH	ESI
   189 00000107 53                              	PUSH	EBX
   190 00000108 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   191 0000010B 83 3D [00000000] 00             	CMP	DWORD [_sheet_created],0
   192 00000112 74 1D                           	JE	L21
   193 00000114 68 [00000033]                   	PUSH	LC1
   194 00000119 E8 [00000000]                   	CALL	_print_error
   195 0000011E 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   196 00000121 C7 00 00000000                  	MOV	DWORD [EAX],0
   197 00000127                                 L20:
   198 00000127 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   199 0000012A 31 C0                           	XOR	EAX,EAX
   200 0000012C 5B                              	POP	EBX
   201 0000012D 5E                              	POP	ESI
   202 0000012E 5F                              	POP	EDI
   203 0000012F 5D                              	POP	EBP
   204 00000130 C3                              	RET
   205 00000131                                 L21:
   206 00000131 E8 [00000000]                   	CALL	_io_cli
   207 00000136 E8 [00000000]                   	CALL	_sheet_alloc
   208 0000013B 89 C3                           	MOV	EBX,EAX
   209 0000013D 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   210 00000140 0F AF 45 10                     	IMUL	EAX,DWORD [16+EBP]
   211 00000144 50                              	PUSH	EAX
   212 00000145 E8 [00000000]                   	CALL	_mm_malloc
   213 0000014A 68 000000FF                     	PUSH	255
   214 0000014F FF 75 10                        	PUSH	DWORD [16+EBP]
   215 00000152 FF 75 0C                        	PUSH	DWORD [12+EBP]
   216 00000155 50                              	PUSH	EAX
   217 00000156 89 C6                           	MOV	ESI,EAX
   218 00000158 53                              	PUSH	EBX
   219 00000159 E8 [00000000]                   	CALL	_sheet_setbuf
   220 0000015E 03 3D [00000000]                	ADD	EDI,DWORD [_program_addr]
   221 00000164 6A 00                           	PUSH	0
   222 00000166 57                              	PUSH	EDI
   223 00000167 FF 75 10                        	PUSH	DWORD [16+EBP]
   224 0000016A FF 75 0C                        	PUSH	DWORD [12+EBP]
   225 0000016D 56                              	PUSH	ESI
   226 0000016E E8 [00000000]                   	CALL	_make_window
   227 00000173 83 C4 2C                        	ADD	ESP,44
   228 00000176 FF 35 00268010                  	PUSH	DWORD [2523152]
   229 0000017C 53                              	PUSH	EBX
   230 0000017D E8 [00000000]                   	CALL	_sheet_updown
   231 00000182 FF 75 18                        	PUSH	DWORD [24+EBP]
   232 00000185 FF 75 14                        	PUSH	DWORD [20+EBP]
   233 00000188 53                              	PUSH	EBX
   234 00000189 E8 [00000000]                   	CALL	_sheet_slide
   235 0000018E 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   236 00000191 89 1D [00000000]                	MOV	DWORD [_sheet_created],EBX
   237 00000197 89 18                           	MOV	DWORD [EAX],EBX
   238 00000199 E8 [00000000]                   	CALL	_io_sti
   239 0000019E EB 87                           	JMP	L20
   240                                          [SECTION .data]
   241 00000066                                 LC2:
   242 00000066 64 72 61 77 5F 73 74 72 20 65   	DB	"draw_str error: illegal window target",0x00
       00000070 72 72 6F 72 3A 20 69 6C 6C 65 
       0000007A 67 61 6C 20 77 69 6E 64 6F 77 
       00000084 20 74 61 72 67 65 74 00 
   243 0000008C                                 LC3:
   244 0000008C 64 72 61 77 5F 73 74 72 20 65   	DB	"draw_str error: graphics out of window",0x00
       00000096 72 72 6F 72 3A 20 67 72 61 70 
       000000A0 68 69 63 73 20 6F 75 74 20 6F 
       000000AA 66 20 77 69 6E 64 6F 77 00 
   245                                          [SECTION .text]
   246 000001A0                                 _api_draw_str:
   247 000001A0 55                              	PUSH	EBP
   248 000001A1 A1 [00000000]                   	MOV	EAX,DWORD [_sheet_created]
   249 000001A6 89 E5                           	MOV	EBP,ESP
   250 000001A8 85 C0                           	TEST	EAX,EAX
   251 000001AA 57                              	PUSH	EDI
   252 000001AB 56                              	PUSH	ESI
   253 000001AC 8B 7D 14                        	MOV	EDI,DWORD [20+EBP]
   254 000001AF 53                              	PUSH	EBX
   255 000001B0 8B 75 18                        	MOV	ESI,DWORD [24+EBP]
   256 000001B3 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   257 000001B6 74 04                           	JE	L24
   258 000001B8 39 D8                           	CMP	EAX,EBX
   259 000001BA 74 14                           	JE	L23
   260 000001BC                                 L24:
   261 000001BC 68 [00000066]                   	PUSH	LC2
   262 000001C1                                 L33:
   263 000001C1 E8 [00000000]                   	CALL	_print_error
   264 000001C6                                 L22:
   265 000001C6 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   266 000001C9 31 C0                           	XOR	EAX,EAX
   267 000001CB 5B                              	POP	EBX
   268 000001CC 5E                              	POP	ESI
   269 000001CD 5F                              	POP	EDI
   270 000001CE 5D                              	POP	EBP
   271 000001CF C3                              	RET
   272 000001D0                                 L23:
   273 000001D0 8B 0D [00000000]                	MOV	ECX,DWORD [_program_addr]
   274 000001D6 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   275 000001D9 01 C8                           	ADD	EAX,ECX
   276 000001DB 31 D2                           	XOR	EDX,EDX
   277 000001DD 80 38 00                        	CMP	BYTE [EAX],0
   278 000001E0 74 0F                           	JE	L26
   279 000001E2                                 L29:
   280 000001E2 42                              	INC	EDX
   281 000001E3 80 3C 02 00                     	CMP	BYTE [EDX+EAX*1],0
   282 000001E7 74 08                           	JE	L26
   283 000001E9 81 FA 000003E7                  	CMP	EDX,999
   284 000001EF 7E F1                           	JLE	L29
   285 000001F1                                 L26:
   286 000001F1 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   287 000001F4 83 E8 10                        	SUB	EAX,16
   288 000001F7 39 C6                           	CMP	ESI,EAX
   289 000001F9 7F 0A                           	JG	L31
   290 000001FB 8D 04 D7                        	LEA	EAX,DWORD [EDI+EDX*8]
   291 000001FE 8B 53 04                        	MOV	EDX,DWORD [4+EBX]
   292 00000201 39 D0                           	CMP	EAX,EDX
   293 00000203 7E 07                           	JLE	L30
   294 00000205                                 L31:
   295 00000205 68 [0000008C]                   	PUSH	LC3
   296 0000020A EB B5                           	JMP	L33
   297 0000020C                                 L30:
   298 0000020C 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   299 0000020F 01 C8                           	ADD	EAX,ECX
   300 00000211 50                              	PUSH	EAX
   301 00000212 56                              	PUSH	ESI
   302 00000213 57                              	PUSH	EDI
   303 00000214 0F B6 45 0C                     	MOVZX	EAX,BYTE [12+EBP]
   304 00000218 50                              	PUSH	EAX
   305 00000219 52                              	PUSH	EDX
   306 0000021A FF 33                           	PUSH	DWORD [EBX]
   307 0000021C E8 [00000000]                   	CALL	_draw_string
   308 00000221 8D 46 10                        	LEA	EAX,DWORD [16+ESI]
   309 00000224 6A 01                           	PUSH	1
   310 00000226 50                              	PUSH	EAX
   311 00000227 FF 73 04                        	PUSH	DWORD [4+EBX]
   312 0000022A 56                              	PUSH	ESI
   313 0000022B 57                              	PUSH	EDI
   314 0000022C 53                              	PUSH	EBX
   315 0000022D E8 [00000000]                   	CALL	_sheet_refresh
   316 00000232 EB 92                           	JMP	L22
   317                                          [SECTION .data]
   318 000000B3                                 LC4:
   319 000000B3 64 72 61 77 5F 72 65 63 20 65   	DB	"draw_rec error: illegal window target",0x00
       000000BD 72 72 6F 72 3A 20 69 6C 6C 65 
       000000C7 67 61 6C 20 77 69 6E 64 6F 77 
       000000D1 20 74 61 72 67 65 74 00 
   320 000000D9                                 LC5:
   321 000000D9 64 72 61 77 5F 72 65 63 20 65   	DB	"draw_rec error: graphics out of window",0x00
       000000E3 72 72 6F 72 3A 20 67 72 61 70 
       000000ED 68 69 63 73 20 6F 75 74 20 6F 
       000000F7 66 20 77 69 6E 64 6F 77 00 
   322                                          [SECTION .text]
   323 00000234                                 _api_draw_rec:
   324 00000234 55                              	PUSH	EBP
   325 00000235 89 E5                           	MOV	EBP,ESP
   326 00000237 57                              	PUSH	EDI
   327 00000238 56                              	PUSH	ESI
   328 00000239 53                              	PUSH	EBX
   329 0000023A 8B 7D 18                        	MOV	EDI,DWORD [24+EBP]
   330 0000023D 8B 1D [00000000]                	MOV	EBX,DWORD [_sheet_created]
   331 00000243 8B 75 1C                        	MOV	ESI,DWORD [28+EBP]
   332 00000246 85 DB                           	TEST	EBX,EBX
   333 00000248 74 05                           	JE	L36
   334 0000024A 3B 5D 08                        	CMP	EBX,DWORD [8+EBP]
   335 0000024D 74 14                           	JE	L35
   336 0000024F                                 L36:
   337 0000024F 68 [000000B3]                   	PUSH	LC4
   338 00000254                                 L39:
   339 00000254 E8 [00000000]                   	CALL	_print_error
   340 00000259                                 L34:
   341 00000259 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   342 0000025C 31 C0                           	XOR	EAX,EAX
   343 0000025E 5B                              	POP	EBX
   344 0000025F 5E                              	POP	ESI
   345 00000260 5F                              	POP	EDI
   346 00000261 5D                              	POP	EBP
   347 00000262 C3                              	RET
   348 00000263                                 L35:
   349 00000263 3B 73 08                        	CMP	ESI,DWORD [8+EBX]
   350 00000266 7D 05                           	JGE	L38
   351 00000268 3B 7B 04                        	CMP	EDI,DWORD [4+EBX]
   352 0000026B 7C 07                           	JL	L37
   353 0000026D                                 L38:
   354 0000026D 68 [000000D9]                   	PUSH	LC5
   355 00000272 EB E0                           	JMP	L39
   356 00000274                                 L37:
   357 00000274 56                              	PUSH	ESI
   358 00000275 57                              	PUSH	EDI
   359 00000276 FF 75 14                        	PUSH	DWORD [20+EBP]
   360 00000279 FF 75 10                        	PUSH	DWORD [16+EBP]
   361 0000027C 0F B6 45 0C                     	MOVZX	EAX,BYTE [12+EBP]
   362 00000280 50                              	PUSH	EAX
   363 00000281 FF 73 04                        	PUSH	DWORD [4+EBX]
   364 00000284 FF 33                           	PUSH	DWORD [EBX]
   365 00000286 E8 [00000000]                   	CALL	_draw_rect
   366 0000028B 8D 46 01                        	LEA	EAX,DWORD [1+ESI]
   367 0000028E 6A 01                           	PUSH	1
   368 00000290 50                              	PUSH	EAX
   369 00000291 8D 47 01                        	LEA	EAX,DWORD [1+EDI]
   370 00000294 50                              	PUSH	EAX
   371 00000295 FF 75 14                        	PUSH	DWORD [20+EBP]
   372 00000298 FF 75 10                        	PUSH	DWORD [16+EBP]
   373 0000029B 53                              	PUSH	EBX
   374 0000029C E8 [00000000]                   	CALL	_sheet_refresh
   375 000002A1 EB B6                           	JMP	L34
   376 000002A3                                 _api_space:
   377 000002A3 55                              	PUSH	EBP
   378 000002A4 8B 15 [00000000]                	MOV	EDX,DWORD [_malloc_addr]
   379 000002AA 89 E5                           	MOV	EBP,ESP
   380 000002AC 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   381 000002AF 89 10                           	MOV	DWORD [EAX],EDX
   382 000002B1 31 C0                           	XOR	EAX,EAX
   383 000002B3 5D                              	POP	EBP
   384 000002B4 C3                              	RET
   385                                          [SECTION .data]
   386 00000100                                 LC6:
   387 00000100 64 72 61 77 5F 70 74 20 65 72   	DB	"draw_pt error: illegal window target",0x00
       0000010A 72 6F 72 3A 20 69 6C 6C 65 67 
       00000114 61 6C 20 77 69 6E 64 6F 77 20 
       0000011E 74 61 72 67 65 74 00 
   388 00000125                                 LC7:
   389 00000125 64 72 61 77 5F 70 74 20 65 72   	DB	"draw_pt error: graphics out of window",0x00
       0000012F 72 6F 72 3A 20 67 72 61 70 68 
       00000139 69 63 73 20 6F 75 74 20 6F 66 
       00000143 20 77 69 6E 64 6F 77 00 
   390                                          [SECTION .text]
   391 000002B5                                 _api_draw_pt:
   392 000002B5 55                              	PUSH	EBP
   393 000002B6 89 E5                           	MOV	EBP,ESP
   394 000002B8 57                              	PUSH	EDI
   395 000002B9 56                              	PUSH	ESI
   396 000002BA 53                              	PUSH	EBX
   397 000002BB 8B 7D 10                        	MOV	EDI,DWORD [16+EBP]
   398 000002BE 8B 1D [00000000]                	MOV	EBX,DWORD [_sheet_created]
   399 000002C4 8B 75 14                        	MOV	ESI,DWORD [20+EBP]
   400 000002C7 85 DB                           	TEST	EBX,EBX
   401 000002C9 74 05                           	JE	L43
   402 000002CB 3B 5D 08                        	CMP	EBX,DWORD [8+EBP]
   403 000002CE 74 14                           	JE	L42
   404 000002D0                                 L43:
   405 000002D0 68 [00000100]                   	PUSH	LC6
   406 000002D5                                 L46:
   407 000002D5 E8 [00000000]                   	CALL	_print_error
   408 000002DA                                 L41:
   409 000002DA 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   410 000002DD 31 C0                           	XOR	EAX,EAX
   411 000002DF 5B                              	POP	EBX
   412 000002E0 5E                              	POP	ESI
   413 000002E1 5F                              	POP	EDI
   414 000002E2 5D                              	POP	EBP
   415 000002E3 C3                              	RET
   416 000002E4                                 L42:
   417 000002E4 3B 73 08                        	CMP	ESI,DWORD [8+EBX]
   418 000002E7 7D 07                           	JGE	L45
   419 000002E9 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   420 000002EC 39 C7                           	CMP	EDI,EAX
   421 000002EE 7C 07                           	JL	L44
   422 000002F0                                 L45:
   423 000002F0 68 [00000125]                   	PUSH	LC7
   424 000002F5 EB DE                           	JMP	L46
   425 000002F7                                 L44:
   426 000002F7 0F AF C6                        	IMUL	EAX,ESI
   427 000002FA 8B 0B                           	MOV	ECX,DWORD [EBX]
   428 000002FC 8D 14 07                        	LEA	EDX,DWORD [EDI+EAX*1]
   429 000002FF 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   430 00000302 88 04 0A                        	MOV	BYTE [EDX+ECX*1],AL
   431 00000305 8D 46 01                        	LEA	EAX,DWORD [1+ESI]
   432 00000308 6A 01                           	PUSH	1
   433 0000030A 50                              	PUSH	EAX
   434 0000030B 8D 47 01                        	LEA	EAX,DWORD [1+EDI]
   435 0000030E 50                              	PUSH	EAX
   436 0000030F 56                              	PUSH	ESI
   437 00000310 57                              	PUSH	EDI
   438 00000311 53                              	PUSH	EBX
   439 00000312 E8 [00000000]                   	CALL	_sheet_refresh
   440 00000317 EB C1                           	JMP	L41
   441                                          [SECTION .data]
   442 0000014B                                 LC8:
   443 0000014B 64 72 61 77 5F 6C 69 6E 65 20   	DB	"draw_line error: illegal window target",0x00
       00000155 65 72 72 6F 72 3A 20 69 6C 6C 
       0000015F 65 67 61 6C 20 77 69 6E 64 6F 
       00000169 77 20 74 61 72 67 65 74 00 
   444 00000172                                 LC9:
   445 00000172 64 72 61 77 5F 6C 69 6E 65 20   	DB	"draw_line error: graphics out of window",0x00
       0000017C 65 72 72 6F 72 3A 20 67 72 61 
       00000186 70 68 69 63 73 20 6F 75 74 20 
       00000190 6F 66 20 77 69 6E 64 6F 77 00 
   446                                          [SECTION .text]
   447 00000319                                 _api_draw_line:
   448 00000319 55                              	PUSH	EBP
   449 0000031A 89 E5                           	MOV	EBP,ESP
   450 0000031C 57                              	PUSH	EDI
   451 0000031D 56                              	PUSH	ESI
   452 0000031E 53                              	PUSH	EBX
   453 0000031F 83 EC 1C                        	SUB	ESP,28
   454 00000322 A1 [00000000]                   	MOV	EAX,DWORD [_sheet_created]
   455 00000327 8B 5D 10                        	MOV	EBX,DWORD [16+EBP]
   456 0000032A 8B 75 14                        	MOV	ESI,DWORD [20+EBP]
   457 0000032D 8B 7D 18                        	MOV	EDI,DWORD [24+EBP]
   458 00000330 85 C0                           	TEST	EAX,EAX
   459 00000332 74 05                           	JE	L49
   460 00000334 3B 45 08                        	CMP	EAX,DWORD [8+EBP]
   461 00000337 74 14                           	JE	L48
   462 00000339                                 L49:
   463 00000339 68 [0000014B]                   	PUSH	LC8
   464 0000033E                                 L82:
   465 0000033E E8 [00000000]                   	CALL	_print_error
   466 00000343                                 L47:
   467 00000343 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   468 00000346 31 C0                           	XOR	EAX,EAX
   469 00000348 5B                              	POP	EBX
   470 00000349 5E                              	POP	ESI
   471 0000034A 5F                              	POP	EDI
   472 0000034B 5D                              	POP	EBP
   473 0000034C C3                              	RET
   474 0000034D                                 L48:
   475 0000034D 39 DF                           	CMP	EDI,EBX
   476 0000034F 7D 02                           	JGE	L50
   477 00000351 87 DF                           	XCHG	EDI,EBX
   478 00000353                                 L50:
   479 00000353 39 75 1C                        	CMP	DWORD [28+EBP],ESI
   480 00000356 7D 07                           	JGE	L51
   481 00000358 8B 45 1C                        	MOV	EAX,DWORD [28+EBP]
   482 0000035B 96                              	XCHG	EAX,ESI
   483 0000035C 89 45 1C                        	MOV	DWORD [28+EBP],EAX
   484 0000035F                                 L51:
   485 0000035F 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   486 00000362 8B 4D 1C                        	MOV	ECX,DWORD [28+EBP]
   487 00000365 3B 4A 08                        	CMP	ECX,DWORD [8+EDX]
   488 00000368 7D 05                           	JGE	L53
   489 0000036A 3B 7A 04                        	CMP	EDI,DWORD [4+EDX]
   490 0000036D 7C 07                           	JL	L52
   491 0000036F                                 L53:
   492 0000036F 68 [00000172]                   	PUSH	LC9
   493 00000374 EB C8                           	JMP	L82
   494 00000376                                 L52:
   495 00000376 89 F8                           	MOV	EAX,EDI
   496 00000378 29 D8                           	SUB	EAX,EBX
   497 0000037A 40                              	INC	EAX
   498 0000037B 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   499 0000037E 8B 45 1C                        	MOV	EAX,DWORD [28+EBP]
   500 00000381 29 F0                           	SUB	EAX,ESI
   501 00000383 40                              	INC	EAX
   502 00000384 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   503 00000387 39 45 F0                        	CMP	DWORD [-16+EBP],EAX
   504 0000038A 7E 67                           	JLE	L54
   505 0000038C 3B 75 1C                        	CMP	ESI,DWORD [28+EBP]
   506 0000038F 7F B2                           	JG	L47
   507 00000391                                 L64:
   508 00000391 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   509 00000394 99                              	CDQ
   510 00000395 F7 7D EC                        	IDIV	DWORD [-20+EBP]
   511 00000398 C7 45 E8 00000000               	MOV	DWORD [-24+EBP],0
   512 0000039F 89 C7                           	MOV	EDI,EAX
   513 000003A1 39 45 E8                        	CMP	DWORD [-24+EBP],EAX
   514 000003A4 7C 10                           	JL	L63
   515 000003A6                                 L78:
   516 000003A6 46                              	INC	ESI
   517 000003A7 01 FB                           	ADD	EBX,EDI
   518 000003A9 29 7D F0                        	SUB	DWORD [-16+EBP],EDI
   519 000003AC FF 4D EC                        	DEC	DWORD [-20+EBP]
   520 000003AF 3B 75 1C                        	CMP	ESI,DWORD [28+EBP]
   521 000003B2 7E DD                           	JLE	L64
   522 000003B4 EB 8D                           	JMP	L47
   523 000003B6                                 L63:
   524 000003B6 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   525 000003B9 8A 4D 0C                        	MOV	CL,BYTE [12+EBP]
   526 000003BC 8B 42 04                        	MOV	EAX,DWORD [4+EDX]
   527 000003BF 8B 12                           	MOV	EDX,DWORD [EDX]
   528 000003C1 0F AF C6                        	IMUL	EAX,ESI
   529 000003C4 01 D8                           	ADD	EAX,EBX
   530 000003C6 03 45 E8                        	ADD	EAX,DWORD [-24+EBP]
   531 000003C9 88 0C 10                        	MOV	BYTE [EAX+EDX*1],CL
   532 000003CC 8D 46 01                        	LEA	EAX,DWORD [1+ESI]
   533 000003CF 6A 01                           	PUSH	1
   534 000003D1 50                              	PUSH	EAX
   535 000003D2 8B 45 E8                        	MOV	EAX,DWORD [-24+EBP]
   536 000003D5 8D 14 18                        	LEA	EDX,DWORD [EAX+EBX*1]
   537 000003D8 8D 42 01                        	LEA	EAX,DWORD [1+EDX]
   538 000003DB 50                              	PUSH	EAX
   539 000003DC 56                              	PUSH	ESI
   540 000003DD 52                              	PUSH	EDX
   541 000003DE FF 75 08                        	PUSH	DWORD [8+EBP]
   542 000003E1 E8 [00000000]                   	CALL	_sheet_refresh
   543 000003E6 FF 45 E8                        	INC	DWORD [-24+EBP]
   544 000003E9 83 C4 18                        	ADD	ESP,24
   545 000003EC 39 7D E8                        	CMP	DWORD [-24+EBP],EDI
   546 000003EF 7C C5                           	JL	L63
   547 000003F1 EB B3                           	JMP	L78
   548 000003F3                                 L54:
   549 000003F3 39 FB                           	CMP	EBX,EDI
   550 000003F5 0F 8F FFFFFF48                  	JG	L47
   551 000003FB                                 L75:
   552 000003FB 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   553 000003FE 99                              	CDQ
   554 000003FF F7 7D F0                        	IDIV	DWORD [-16+EBP]
   555 00000402 C7 45 E8 00000000               	MOV	DWORD [-24+EBP],0
   556 00000409 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
   557 0000040C 39 45 E8                        	CMP	DWORD [-24+EBP],EAX
   558 0000040F 7C 16                           	JL	L74
   559 00000411                                 L81:
   560 00000411 8B 55 E4                        	MOV	EDX,DWORD [-28+EBP]
   561 00000414 43                              	INC	EBX
   562 00000415 03 75 E4                        	ADD	ESI,DWORD [-28+EBP]
   563 00000418 29 55 EC                        	SUB	DWORD [-20+EBP],EDX
   564 0000041B FF 4D F0                        	DEC	DWORD [-16+EBP]
   565 0000041E 39 FB                           	CMP	EBX,EDI
   566 00000420 7E D9                           	JLE	L75
   567 00000422 E9 FFFFFF1C                     	JMP	L47
   568 00000427                                 L74:
   569 00000427 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   570 0000042A 8B 55 E8                        	MOV	EDX,DWORD [-24+EBP]
   571 0000042D 01 F2                           	ADD	EDX,ESI
   572 0000042F 89 55 D8                        	MOV	DWORD [-40+EBP],EDX
   573 00000432 8B 01                           	MOV	EAX,DWORD [ECX]
   574 00000434 0F AF 51 04                     	IMUL	EDX,DWORD [4+ECX]
   575 00000438 01 DA                           	ADD	EDX,EBX
   576 0000043A 8A 4D 0C                        	MOV	CL,BYTE [12+EBP]
   577 0000043D 88 0C 02                        	MOV	BYTE [EDX+EAX*1],CL
   578 00000440 6A 01                           	PUSH	1
   579 00000442 8B 45 D8                        	MOV	EAX,DWORD [-40+EBP]
   580 00000445 40                              	INC	EAX
   581 00000446 50                              	PUSH	EAX
   582 00000447 8D 43 01                        	LEA	EAX,DWORD [1+EBX]
   583 0000044A 50                              	PUSH	EAX
   584 0000044B FF 75 D8                        	PUSH	DWORD [-40+EBP]
   585 0000044E 53                              	PUSH	EBX
   586 0000044F FF 75 08                        	PUSH	DWORD [8+EBP]
   587 00000452 E8 [00000000]                   	CALL	_sheet_refresh
   588 00000457 8B 45 E4                        	MOV	EAX,DWORD [-28+EBP]
   589 0000045A FF 45 E8                        	INC	DWORD [-24+EBP]
   590 0000045D 83 C4 18                        	ADD	ESP,24
   591 00000460 39 45 E8                        	CMP	DWORD [-24+EBP],EAX
   592 00000463 7C C2                           	JL	L74
   593 00000465 EB AA                           	JMP	L81
   594 00000467                                 _api_print_err:
   595 00000467 55                              	PUSH	EBP
   596 00000468 A1 [00000000]                   	MOV	EAX,DWORD [_program_addr]
   597 0000046D 89 E5                           	MOV	EBP,ESP
   598 0000046F 03 45 08                        	ADD	EAX,DWORD [8+EBP]
   599 00000472 50                              	PUSH	EAX
   600 00000473 E8 [00000000]                   	CALL	_print_error
   601 00000478 31 C0                           	XOR	EAX,EAX
   602 0000047A C9                              	LEAVE
   603 0000047B C3                              	RET
   604 0000047C                                 _api_close_window:
   605 0000047C 55                              	PUSH	EBP
   606 0000047D 89 E5                           	MOV	EBP,ESP
   607 0000047F 53                              	PUSH	EBX
   608 00000480 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   609 00000483 E8 [00000000]                   	CALL	_io_cli
   610 00000488 53                              	PUSH	EBX
   611 00000489 E8 [00000000]                   	CALL	_sheet_free
   612 0000048E FF 33                           	PUSH	DWORD [EBX]
   613 00000490 E8 [00000000]                   	CALL	_mm_free
   614 00000495 C7 05 [00000000] 00000000       	MOV	DWORD [_sheet_created],0
   615 0000049F E8 [00000000]                   	CALL	_io_sti
   616 000004A4 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   617 000004A7 31 C0                           	XOR	EAX,EAX
   618 000004A9 C9                              	LEAVE
   619 000004AA C3                              	RET
   620 000004AB                                 _api_scan_str:
   621 000004AB 55                              	PUSH	EBP
   622 000004AC 89 E5                           	MOV	EBP,ESP
   623 000004AE 57                              	PUSH	EDI
   624 000004AF 56                              	PUSH	ESI
   625 000004B0 31 FF                           	XOR	EDI,EDI
   626 000004B2 53                              	PUSH	EBX
   627 000004B3 51                              	PUSH	ECX
   628 000004B4 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   629 000004B7 83 7D 0C 01                     	CMP	DWORD [12+EBP],1
   630 000004BB 7E 70                           	JLE	L85
   631 000004BD                                 L97:
   632 000004BD E8 [00000000]                   	CALL	_task_now
   633 000004C2 83 C0 10                        	ADD	EAX,16
   634 000004C5 50                              	PUSH	EAX
   635 000004C6 E8 [00000000]                   	CALL	_fifo_status
   636 000004CB 5A                              	POP	EDX
   637 000004CC 85 C0                           	TEST	EAX,EAX
   638 000004CE 74 74                           	JE	L100
   639 000004D0 E8 [00000000]                   	CALL	_task_now
   640 000004D5 83 C0 10                        	ADD	EAX,16
   641 000004D8 50                              	PUSH	EAX
   642 000004D9 E8 [00000000]                   	CALL	_fifo_get
   643 000004DE 89 C3                           	MOV	EBX,EAX
   644 000004E0 0F B6 C0                        	MOVZX	EAX,AL
   645 000004E3 50                              	PUSH	EAX
   646 000004E4 E8 [00000000]                   	CALL	_key_to_char
   647 000004E9 81 FB 00000201                  	CMP	EBX,513
   648 000004EF 59                              	POP	ECX
   649 000004F0 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   650 000004F3 58                              	POP	EAX
   651 000004F4 74 41                           	JE	L101
   652 000004F6                                 L91:
   653 000004F6 80 7D F3 00                     	CMP	BYTE [-13+EBP],0
   654 000004FA 74 C1                           	JE	L97
   655 000004FC 80 7D F3 08                     	CMP	BYTE [-13+EBP],8
   656 00000500 74 BB                           	JE	L97
   657 00000502 80 7D F3 0A                     	CMP	BYTE [-13+EBP],10
   658 00000506 74 1B                           	JE	L99
   659 00000508 8B 55 0C                        	MOV	EDX,DWORD [12+EBP]
   660 0000050B 4A                              	DEC	EDX
   661 0000050C 39 D7                           	CMP	EDI,EDX
   662 0000050E 7D AD                           	JGE	L97
   663 00000510 89 F0                           	MOV	EAX,ESI
   664 00000512 8A 4D F3                        	MOV	CL,BYTE [-13+EBP]
   665 00000515 03 05 [00000000]                	ADD	EAX,DWORD [_program_addr]
   666 0000051B 88 0C 07                        	MOV	BYTE [EDI+EAX*1],CL
   667 0000051E 47                              	INC	EDI
   668 0000051F 39 D7                           	CMP	EDI,EDX
   669 00000521 75 9A                           	JNE	L97
   670 00000523                                 L99:
   671 00000523 03 35 [00000000]                	ADD	ESI,DWORD [_program_addr]
   672 00000529 C6 04 37 00                     	MOV	BYTE [EDI+ESI*1],0
   673 0000052D                                 L85:
   674 0000052D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   675 00000530 31 C0                           	XOR	EAX,EAX
   676 00000532 5B                              	POP	EBX
   677 00000533 5E                              	POP	ESI
   678 00000534 5F                              	POP	EDI
   679 00000535 5D                              	POP	EBP
   680 00000536 C3                              	RET
   681 00000537                                 L101:
   682 00000537 6A 32                           	PUSH	50
   683 00000539 6A 01                           	PUSH	1
   684 0000053B E8 [00000000]                   	CALL	_start_timing
   685 00000540 58                              	POP	EAX
   686 00000541 5A                              	POP	EDX
   687 00000542 EB B2                           	JMP	L91
   688 00000544                                 L100:
   689 00000544 E8 [00000000]                   	CALL	_task_now
   690 00000549 50                              	PUSH	EAX
   691 0000054A E8 [00000000]                   	CALL	_task_sleep
   692 0000054F 58                              	POP	EAX
   693 00000550 E9 FFFFFF68                     	JMP	L97
