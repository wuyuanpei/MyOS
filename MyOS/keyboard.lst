     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_in8
     7 00000000                                 	EXTERN	_io_out8
     8 00000000                                 	EXTERN	_fifo8_put
     9 00000000                                 [FILE "keyboard.c"]
    10                                          [SECTION .text]
    11 00000000                                 	GLOBAL	_wait_KBC_sendready
    12 00000000                                 _wait_KBC_sendready:
    13 00000000 55                              	PUSH	EBP
    14 00000001 89 E5                           	MOV	EBP,ESP
    15 00000003                                 L2:
    16 00000003 6A 64                           	PUSH	100
    17 00000005 E8 [00000000]                   	CALL	_io_in8
    18 0000000A 5A                              	POP	EDX
    19 0000000B 83 E0 02                        	AND	EAX,2
    20 0000000E 75 F3                           	JNE	L2
    21 00000010 C9                              	LEAVE
    22 00000011 C3                              	RET
    23 00000012                                 	GLOBAL	_init_keyboard
    24 00000012                                 _init_keyboard:
    25 00000012 55                              	PUSH	EBP
    26 00000013 89 E5                           	MOV	EBP,ESP
    27 00000015 E8 FFFFFFE6                     	CALL	_wait_KBC_sendready
    28 0000001A 6A 60                           	PUSH	96
    29 0000001C 6A 64                           	PUSH	100
    30 0000001E E8 [00000000]                   	CALL	_io_out8
    31 00000023 E8 FFFFFFD8                     	CALL	_wait_KBC_sendready
    32 00000028 6A 47                           	PUSH	71
    33 0000002A 6A 60                           	PUSH	96
    34 0000002C E8 [00000000]                   	CALL	_io_out8
    35 00000031 C9                              	LEAVE
    36 00000032 C3                              	RET
    37 00000033                                 	GLOBAL	_inthandler21
    38 00000033                                 _inthandler21:
    39 00000033 55                              	PUSH	EBP
    40 00000034 89 E5                           	MOV	EBP,ESP
    41 00000036 6A 61                           	PUSH	97
    42 00000038 6A 20                           	PUSH	32
    43 0000003A E8 [00000000]                   	CALL	_io_out8
    44 0000003F 6A 60                           	PUSH	96
    45 00000041 E8 [00000000]                   	CALL	_io_in8
    46 00000046 0F B6 C0                        	MOVZX	EAX,AL
    47 00000049 50                              	PUSH	EAX
    48 0000004A 68 [00000060]                   	PUSH	_keyfifo
    49 0000004F E8 [00000000]                   	CALL	_fifo8_put
    50 00000054 C9                              	LEAVE
    51 00000055 C3                              	RET
    52                                          [SECTION .data]
    53 00000000                                 _keytable.0:
    54 00000000 00                              	DB	0
    55 00000001 00                              	DB	0
    56 00000002 31                              	DB	49
    57 00000003 32                              	DB	50
    58 00000004 33                              	DB	51
    59 00000005 34                              	DB	52
    60 00000006 35                              	DB	53
    61 00000007 36                              	DB	54
    62 00000008 37                              	DB	55
    63 00000009 38                              	DB	56
    64 0000000A 39                              	DB	57
    65 0000000B 30                              	DB	48
    66 0000000C 2D                              	DB	45
    67 0000000D 3D                              	DB	61
    68 0000000E 00                              	DB	0
    69 0000000F 00                              	DB	0
    70 00000010 51                              	DB	81
    71 00000011 57                              	DB	87
    72 00000012 45                              	DB	69
    73 00000013 52                              	DB	82
    74 00000014 54                              	DB	84
    75 00000015 59                              	DB	89
    76 00000016 55                              	DB	85
    77 00000017 49                              	DB	73
    78 00000018 4F                              	DB	79
    79 00000019 50                              	DB	80
    80 0000001A 5B                              	DB	91
    81 0000001B 5D                              	DB	93
    82 0000001C 00                              	DB	0
    83 0000001D 00                              	DB	0
    84 0000001E 41                              	DB	65
    85 0000001F 53                              	DB	83
    86 00000020 44                              	DB	68
    87 00000021 46                              	DB	70
    88 00000022 47                              	DB	71
    89 00000023 48                              	DB	72
    90 00000024 4A                              	DB	74
    91 00000025 4B                              	DB	75
    92 00000026 4C                              	DB	76
    93 00000027 3B                              	DB	59
    94 00000028 27                              	DB	39
    95 00000029 60                              	DB	96
    96 0000002A 00                              	DB	0
    97 0000002B 5C                              	DB	92
    98 0000002C 5A                              	DB	90
    99 0000002D 58                              	DB	88
   100 0000002E 43                              	DB	67
   101 0000002F 56                              	DB	86
   102 00000030 42                              	DB	66
   103 00000031 4E                              	DB	78
   104 00000032 4D                              	DB	77
   105 00000033 2C                              	DB	44
   106 00000034 2E                              	DB	46
   107 00000035 2F                              	DB	47
   108 00000036 00                              	DB	0
   109 00000037 2A                              	DB	42
   110 00000038 00                              	DB	0
   111 00000039 20                              	DB	32
   112 0000003A 00                              	DB	0
   113 0000003B 00                              	DB	0
   114 0000003C 00                              	DB	0
   115 0000003D 00                              	DB	0
   116 0000003E 00                              	DB	0
   117 0000003F 00                              	DB	0
   118 00000040 00                              	DB	0
   119 00000041 00                              	DB	0
   120 00000042 00                              	DB	0
   121 00000043 00                              	DB	0
   122 00000044 00                              	DB	0
   123 00000045 00                              	DB	0
   124 00000046 00                              	DB	0
   125 00000047 37                              	DB	55
   126 00000048 38                              	DB	56
   127 00000049 39                              	DB	57
   128 0000004A 2D                              	DB	45
   129 0000004B 34                              	DB	52
   130 0000004C 35                              	DB	53
   131 0000004D 36                              	DB	54
   132 0000004E 2B                              	DB	43
   133 0000004F 31                              	DB	49
   134 00000050 32                              	DB	50
   135 00000051 33                              	DB	51
   136 00000052 30                              	DB	48
   137 00000053 2E                              	DB	46
   138                                          [SECTION .text]
   139 00000056                                 	GLOBAL	_key_to_char
   140 00000056                                 _key_to_char:
   141 00000056 55                              	PUSH	EBP
   142 00000057 31 D2                           	XOR	EDX,EDX
   143 00000059 89 E5                           	MOV	EBP,ESP
   144 0000005B 8A 45 08                        	MOV	AL,BYTE [8+EBP]
   145 0000005E 3C 53                           	CMP	AL,83
   146 00000060 77 0A                           	JA	L8
   147 00000062 0F B6 C0                        	MOVZX	EAX,AL
   148 00000065 0F BE 90 [00000000]             	MOVSX	EDX,BYTE [_keytable.0+EAX]
   149 0000006C                                 L8:
   150 0000006C 89 D0                           	MOV	EAX,EDX
   151 0000006E 5D                              	POP	EBP
   152 0000006F C3                              	RET
   153 00000070                                 	GLOBAL	_keyfifo
   154                                          [SECTION .data]
   155 00000054 00 00 00 00 00 00 00 00 00 00   	ALIGNB	16
       0000005E 00 00 
   156 00000060                                 _keyfifo:
   157 00000060 00 00 00 00 00 00 00 00 00 00   	RESB	24
       0000006A 00 00 00 00 00 00 00 00 00 00 
       00000074 00 00 00 00 
